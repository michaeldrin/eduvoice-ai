
500 Error
Unexpected Error

Details: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UndefinedColumn) column "language" of relation "document" does not exist LINE 1: ...ame, audio_filename, upload_time, auto_processed, language, ... ^ [SQL: INSERT INTO document (user_id, filename, filetype, summary, text_content, text_filename, audio_filename, upload_time, auto_processed, language, translated_language, translated_summary, translated_content) VALUES (%(user_id)s, %(filename)s, %(filetype)s, %(summary)s, %(text_content)s, %(text_filename)s, %(audio_filename)s, %(upload_time)s, %(auto_processed)s, %(language)s, %(translated_language)s, %(translated_summary)s, %(translated_content)s) RETURNING document.id] [parameters: {'user_id': 'guest@example.com', 'filename': 'Muster-DSH_LV_Aufgaben.pdf', 'filetype': 'PDF', 'summary': 'ملخص النص حول "الروبوتات الخدمية MARGe وBARt-UH":\n\n1. **المفاهيم الأساسية والأفكار الرئيسية:**\n - يتناول النص أهمية الروبوتات الخدمية مثل MARGe ... (872 characters truncated) ... ساعد الطلاب على فهم الأساسيات المتعلقة بالروبوتات الخدمية ودور الميكاترونيك في تطويرها، بالإضافة إلى تقديم لمحة عن التخصصات التي ساهمت في هذا المجال.', 'text_content': ' \r\n \r\n \r\n \r\nMuster – DSH \r\nLeseverstehen Aufgaben \r\n1 \r\nMuster - DSH \r\n \r\n \r\n \r\n \r\n Leseverstehen – Aufgaben \r\nTe ... (3542 characters truncated) ... A \r\n4. Das Mechatronik-Zentrum Hannover \r\n \r\n5. Was ist Mechatronik? \r\n \r\n \r\n \r\n \r\n22 \r\n \r\n24 \r\n \r\n20 \r\n \r\n \r\n200 \r\n', 'text_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3.txt', 'audio_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3_b25ec1fd.mp3', 'upload_time': datetime.datetime(2025, 5, 5, 19, 35, 45, 617039), 'auto_processed': True, 'language': 'ar', 'translated_language': None, 'translated_summary': None, 'translated_content': None}] (Background on this error at: https://sqlalche.me/e/20/f405) (Background on this error at: https://sqlalche.me/e/20/7s2a) Traceback: Traceback (most recent call last): File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request rv = self.dispatch_request() ^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args) # type: ignore[no-any-return] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/oauth.py", line 506, in wrapped_view return view_func(*args, **kwargs) ^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/main.py", line 1525, in summarize_text return render_template( ^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template return _render(app, template, context) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render rv = template.render(context) ^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render self.environment.handle_exception() File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception raise rewrite_traceback_stack(source=source) File "/home/runner/workspace/templates/summary.html", line 48, in top-level template code {% include 'usage_stats.html' %} ^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/templates/usage_stats.html", line 19, in top-level template code <span>{{ usage_stats.files_uploaded }} / {{ usage_stats.MAX_FILES_PER_DAY }}</span> ^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 490, in getattr return getattr(obj, attribute) ^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__ return self.impl.get(state, dict_) # type: ignore[no-any-return] ^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get value = self._fire_loader_callables(state, key, passive) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables return state._load_expired(state, passive) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired self.manager.expired_attribute_loader(self, toload, passive) File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 1670, in load_scalar_attributes result = load_on_ident( ^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident return load_on_pk_identity( ^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity session.execute( File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute return self._execute_internal( ^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal conn = self._connection_for_bind(bind) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind return trans._connection_for_bind(engine, execution_options) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "<string>", line 2, in _connection_for_bind File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go self._raise_for_prerequisite_state(fn.__name__, current_state) File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 973, in _raise_for_prerequisite_state raise sa_exc.PendingRollbackError( sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UndefinedColumn) column "language" of relation "document" does not exist LINE 1: ...ame, audio_filename, upload_time, auto_processed, language, ... ^ [SQL: INSERT INTO document (user_id, filename, filetype, summary, text_content, text_filename, audio_filename, upload_time, auto_processed, language, translated_language, translated_summary, translated_content) VALUES (%(user_id)s, %(filename)s, %(filetype)s, %(summary)s, %(text_content)s, %(text_filename)s, %(audio_filename)s, %(upload_time)s, %(auto_processed)s, %(language)s, %(translated_language)s, %(translated_summary)s, %(translated_content)s) RETURNING document.id] [parameters: {'user_id': 'guest@example.com', 'filename': 'Muster-DSH_LV_Aufgaben.pdf', 'filetype': 'PDF', 'summary': 'ملخص النص حول "الروبوتات الخدمية MARGe وBARt-UH":\n\n1. **المفاهيم الأساسية والأفكار الرئيسية:**\n - يتناول النص أهمية الروبوتات الخدمية مثل MARGe ... (872 characters truncated) ... ساعد الطلاب على فهم الأساسيات المتعلقة بالروبوتات الخدمية ودور الميكاترونيك في تطويرها، بالإضافة إلى تقديم لمحة عن التخصصات التي ساهمت في هذا المجال.', 'text_content': ' \r\n \r\n \r\n \r\nMuster – DSH \r\nLeseverstehen Aufgaben \r\n1 \r\nMuster - DSH \r\n \r\n \r\n \r\n \r\n Leseverstehen – Aufgaben \r\nTe ... (3542 characters truncated) ... A \r\n4. Das Mechatronik-Zentrum Hannover \r\n \r\n5. Was ist Mechatronik? \r\n \r\n \r\n \r\n \r\n22 \r\n \r\n24 \r\n \r\n20 \r\n \r\n \r\n200 \r\n', 'text_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3.txt', 'audio_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3_b25ec1fd.mp3', 'upload_time': datetime.datetime(2025, 5, 5, 19, 35, 45, 617039), 'auto_processed': True, 'language': 'ar', 'translated_language': None, 'translated_summary': None, 'translated_content': None}] (Background on this error at: https://sqlalche.me/e/20/f405) (Background on this error at: https://sqlalche.me/e/20/7s2a)


                                This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UndefinedColumn) column "language" of relation "document" does not exist
LINE 1: ...ame, audio_filename, upload_time, auto_processed, language, ...
                                                             ^

[SQL: INSERT INTO document (user_id, filename, filetype, summary, text_content, text_filename, audio_filename, upload_time, auto_processed, language, translated_language, translated_summary, translated_content) VALUES (%(user_id)s, %(filename)s, %(filetype)s, %(summary)s, %(text_content)s, %(text_filename)s, %(audio_filename)s, %(upload_time)s, %(auto_processed)s, %(language)s, %(translated_language)s, %(translated_summary)s, %(translated_content)s) RETURNING document.id]
[parameters: {'user_id': 'guest@example.com', 'filename': 'Muster-DSH_LV_Aufgaben.pdf', 'filetype': 'PDF', 'summary': 'ملخص النص حول "الروبوتات الخدمية MARGe وBARt-UH":\n\n1. **المفاهيم الأساسية والأفكار الرئيسية:**\n   - يتناول النص أهمية الروبوتات الخدمية مثل MARGe  ... (872 characters truncated) ... ساعد الطلاب على فهم الأساسيات المتعلقة بالروبوتات الخدمية ودور الميكاترونيك في تطويرها، بالإضافة إلى تقديم لمحة عن التخصصات التي ساهمت في هذا المجال.', 'text_content': ' \r\n \r\n \r\n \r\nMuster – DSH \r\nLeseverstehen Aufgaben \r\n1 \r\nMuster - DSH \r\n \r\n \r\n \r\n \r\n           Leseverstehen – Aufgaben \r\nTe ... (3542 characters truncated) ... A \r\n4. Das Mechatronik-Zentrum Hannover \r\n \r\n5. Was ist Mechatronik? \r\n \r\n \r\n  \r\n \r\n22 \r\n \r\n24 \r\n \r\n20 \r\n \r\n \r\n200 \r\n', 'text_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3.txt', 'audio_filename': 'Muster-DSH_LV_Aufgaben_0628dfb3_b25ec1fd.mp3', 'upload_time': datetime.datetime(2025, 5, 5, 19, 35, 45, 617039), 'auto_processed': True, 'language': 'ar', 'translated_language': None, 'translated_summary': None, 'translated_content': None}]
(Background on this error at: https://sqlalche.me/e/20/f405) (Background on this error at: https://sqlalche.me/e/20/7s2a)
